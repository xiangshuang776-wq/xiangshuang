<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THE_PULSE</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; font-family: "Helvetica", sans-serif; height: 100vh; overflow: hidden; }

        /* 阶段 1：黑洞 */
        #stage-1 { position: fixed; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; transition: 1s; }
        .black-hole { width: 100px; height: 100px; background: #fff; border-radius: 50%; box-shadow: 0 0 100px #fff; animation: pulse 4s infinite ease-in-out; cursor: pointer; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.2); opacity: 1; box-shadow: 0 0 200px #fff; } }

        /* 阶段 2：录入 */
        #stage-2 { position: fixed; inset: 0; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 50; padding: 40px; }
        input { background: none; border: none; border-bottom: 2px solid #fff; color: #fff; font-size: 32px; width: 100%; text-align: center; outline: none; margin-bottom: 50px; font-weight: 100; letter-spacing: 5px; }

        /* 阶段 3：双指对焦 (灵魂玩法) */
        #stage-3 { position: fixed; inset: 0; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 20; }
        .touch-pad { position: absolute; bottom: 100px; width: 80px; height: 80px; border: 1px solid #fff; border-radius: 50%; opacity: 0.3; }
        #left-pad { left: 40px; } #right-pad { right: 40px; }
        .wave { position: absolute; top: 40%; width: 100%; height: 2px; background: #fff; opacity: 0.2; transform: scaleY(10); }
        #sync-box { font-size: 80px; font-weight: 900; letter-spacing: -5px; }

        /* 阶段 4：结果 */
        #stage-4 { position: fixed; inset: 0; background: #fff; color: #000; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 200; text-align: center; }
        .final-date { font-size: 100px; font-weight: 900; line-height: 1; margin: 20px 0; }
    </style>
</head>
<body>

    <div id="stage-1" onclick="toInput()">
        <div class="black-hole"></div>
        <p style="margin-top: 50px; font-size: 10px; letter-spacing: 8px; opacity: 0.5;">唤 醒 锚 点</p>
    </div>

    <div id="stage-2">
        <input type="text" id="name" placeholder="IDENTIFIER" spellcheck="false" autocomplete="off">
        <div onclick="toFocus()" style="font-size: 12px; letter-spacing: 10px; cursor: pointer; border: 1px solid #fff; padding: 15px 40px;">开始同步</div>
    </div>

    <div id="stage-3">
        <div id="sync-box">00</div>
        <div class="wave" id="wave-1"></div>
        <div class="wave" id="wave-2" style="top: 45%;"></div>
        <div id="left-pad" class="touch-pad"></div>
        <div id="right-pad" class="touch-pad"></div>
        <p style="position: absolute; bottom: 220px; font-size: 10px; letter-spacing: 5px; opacity: 0.5;">双 指 按 住 触 发 区 · 稳 定 脉 冲</p>
    </div>

    <div id="stage-4">
        <div style="font-size: 10px; letter-spacing: 10px; margin-bottom: 20px;">LOCKED</div>
        <div id="user-display" style="font-weight: bold; border-bottom: 2px solid #000;">---</div>
        <div class="final-date" id="final-date">09/24</div>
        <div style="max-width: 250px; font-size: 14px; line-height: 2; margin-top: 20px;">
            资产共振已完成锚定。<br>该节点已写入你的现实协议。
        </div>
        <button onclick="location.reload()" style="margin-top: 60px; background: #000; color: #fff; border: none; padding: 20px 50px; font-size: 12px; letter-spacing: 5px;">保 存 并 闭 合</button>
    </div>

    <script>
        // 流程切换
        function toInput() {
            document.getElementById('stage-1').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('stage-1').style.display = 'none';
                document.getElementById('stage-2').style.display = 'flex';
            }, 1000);
        }

        function toFocus() {
            if(!document.getElementById('name').value) return;
            document.getElementById('stage-2').style.display = 'none';
            document.getElementById('stage-3').style.display = 'flex';
        }

        // 核心逻辑：双指共振
        let touches = 0;
        let progress = 0;
        const syncBox = document.getElementById('sync-box');
        const wave1 = document.getElementById('wave-1');
        const wave2 = document.getElementById('wave-2');

        window.addEventListener('touchstart', (e) => {
            touches = e.touches.length;
            if(touches === 2) {
                document.getElementById('left-pad').style.opacity = "1";
                document.getElementById('right-pad').style.opacity = "1";
            }
        });

        window.addEventListener('touchend', (e) => {
            touches = e.touches.length;
            document.getElementById('left-pad').style.opacity = "0.3";
            document.getElementById('right-pad').style.opacity = "0.3";
        });

        // 模拟高维对焦过程
        setInterval(() => {
            if(touches === 2) {
                progress += 0.5;
                // 视觉波动效果
                wave1.style.transform = `scaleY(${10 + Math.sin(Date.now()/100) * 5})`;
                wave2.style.transform = `scaleY(${10 + Math.cos(Date.now()/100) * 5})`;
                syncBox.style.opacity = Math.random() * 0.5 + 0.5;
            } else {
                progress = Math.max(0, progress - 0.2);
                wave1.style.transform = `scaleY(2)`;
                wave2.style.transform = `scaleY(2)`;
            }

            syncBox.innerText = Math.min(Math.floor(progress), 100).toString().padStart(2, '0');

            if(progress >= 100) {
                showFinal();
                progress = -999; // 防止重复触发
            }
        }, 50);

        function showFinal() {
            document.getElementById('user-display').innerText = document.getElementById('name').value.toUpperCase();
            document.getElementById('stage-4').style.display = 'flex';
            // 简单的震动反馈
            if(window.navigator.vibrate) window.navigator.vibrate([100, 50, 200]);
        }
    </script>
</body>
</html>
